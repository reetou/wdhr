### WDHR - проект для поиска людей на проект

#### Фичи

* Авторизация через гитхаб
* Выкладка проекта на сабдомен kokoro.codes (http://1-project_name.kokoro.codes, например)
* Если в корне проекта нет index.html, пользователь получит уведомление о том, что фронта у его проекта не будет (nginx смотрит только на index.html)
* Создавать можно не более 5 проектов на одного пользователя (но предусмотрена возможность для silver (10 проектов) и gold (20 проектов) пользователя с увеличением количества проектов)
* Максимальный размер проекта у обычного пользователя 15mb, у silver 50mb, у gold 100mb
* Загрузка аватарки проекта
* Редактирование проекта
* Можно принимать и отклонять заявки на участие
* Можно отправить и отозвать заявку на участие в проекте
* Можно оценивать проект
* Можно удалять проект
* Можно делать проект публичным и приватным (скрытым от поиска, заявок и рейтингов, но рейтинг и заявки не сбрасываются)
* Лайк у проекта нельзя забрать назад, если он стал приватным
* Если проект приватный и пользователь участник, он все равно не увидит проект в листинге
* При посещении какого-либо проекта на сабдомене kokoro.codes и будучи залогиненным в текущей сессии автор пользователя получит оповещение о том, что кто-то посетил его проект
* Подгружаются и обновляются репозитории пользователя (только публичные источники и публичные форки)
* Автору проекта приходят уведомления о новых заявках на участие
* При лайке проекта автору проекта приходит оповещение об оценке
* При снятии лайка тоже
* Пользователю, отправившему заявку на участие приходит оповещение, если его заявка отклонена или одобрена
* Обновление репозиториев пользователя происходит с задержкой 5 минут с даты последнего обновления


**Все уведомления приходят только если пользователь онлайн**

#### Techs

* Базы: Redis, Postgres, раньше был только редис, но я переписал основную часть бека на постгрес, да
* Back: Node.js, Knex для SQL билдера, Objection для моделей SQL
* Frontend: React, Mobx, Rx.js, Ant.design в качестве юи
* Deploy: Digital Ocean CDN, Digital Ocean дроплеты
* Server: Nginx и все такое

#### Запуск локально

* **[Просто надо]** Нужен редис, префикс по дефолту стоит wdhr:
* **[Просто надо]** Нужна база с постгресом, можно настроить в knexfile.js
* **[Авторизация]** Нужен апликейшон на гитхабе, а именно secret и id
* **[Оповещения]** Нужен акк в пушере на кластере ap3 (или по дефолту будет eu, но откуда у вас такой, м?)
* Заполняем .env файлик (пример ниже)
* Запускаем миграции `yarn migrate`
* Запускаем сиды `yarn seed`
* Запускаем тесты на всякий случай `yarn test`
* **ВАЖНО:** Для каждого запуска тестов нужно накатывать базу заново, то есть делать `yarn rollback`, а потом миграции и все остальное
* Потом запускаем бек `yarn back`
* Потом запускаем фронт `yarn start:parcel` или вебпаком просто `yarn start`

##### .env:
* **НАСТРОЙТЕ ПОСТГРЕС В knexfile.js**
* GH_CLIENT_ID=гитхаб app id
* GH_CLIENT_SECRET=гитхаб secret
* COOKIE_SECRET=рандомный секрет для куков
* PUSHER_KEY=ключ от пушера
* APP_ID=пушер апп айди
* SECRET=пушер секрет
* S3_URL=адрес s3 сервера
* S3_ACCESS_KEY=access key на s3
* S3_SECRET=s3 секрет
* S3_BUCKET=s3 бакет
* REDIS_HOST=хост редиса
* REDIS_PASSWORD=пароль от редиса
* REDIS_PORT=порт от редиса (если не указать то будет 6379)

